<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.dsw.iot.dal.TpMenuDoMapperExt">
    <select id="selectTpMenuDoByUserId" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from tp_menu m
        where
        m.id in(select t2.menu_id from tp_role_menu t2
        where t2.role_id = (select ur.role_id from tp_user_role ur where
        ur.user_id=#{userId,jdbcType=INTEGER}))
    </select>
</mapper>